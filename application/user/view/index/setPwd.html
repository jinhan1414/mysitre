<div class="container m0 bod top70" id="zt">
    <div class="pwd">
        <div class="page-header">
            <h3>jQuery插件库重设密码</h3>
        </div>
        <div class="input-group">

            <input type="text" class="form-control" id="eml" placeholder="请输入新的密码" onblur="emailgs()">
            <span class="input-group-btn">
                    <input id="Button1" class="btn btn-default pwdbut" type="button" onclick="sc()" value="修改密码" />
                </span>
        </div>
        <!-- /input-group -->
    </div>
</div>

<script type="text/javascript">
    var m = 0;

    function sc() {
        if (m == 1) {
            var newpwd = $("#eml").val();
            var yz = $.ajax({
                type: 'post',
                url: window.location,
                data: { newPwd: newpwd },
                cache: false,
                dataType: 'json',
                success: function (data) {
                    if (data.code == "1") {
                        window.location.href = "/";
                    } else {
                        window.location.href = window.location;
                    }
                },
                error: function () { }
            });
        }
    }

    function emailgs() {
        var mpwd1 = $("#eml").val();
        if (mpwd1.length< 4) {
            $("#eml").addClass("err");
            $("#eml").attr('placeholder', '密码长度太短')
        }
        else if (mpwd1.length > 30) {
            $("#eml").addClass("err");
            $("#eml").attr('placeholder', '密码长度太长了.')
        }
        else
        {
            m = 1;
            $("#eml").removeClass("err");
        }

    }

</script>